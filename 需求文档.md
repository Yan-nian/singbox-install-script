# Sing-box 个人一键配置脚本需求文档

## 项目概述

开发一个个人使用的 sing-box 一键配置脚本，支持三种主要协议的快速部署和管理。

## 核心功能需求

### 1. 支持协议
- **VLESS Reality**: 默认协议，自动生成密钥对
- **VMess**: 支持 WebSocket + TLS 传输
- **Hysteria2**: 高性能 UDP 协议

### 2. 基础功能
- **一键安装**: 自动下载并安装 sing-box 核心
- **配置管理**: 添加、删除、查看配置
- **端口管理**: 自动分配或手动指定端口
- **链接分享**: 生成分享链接和二维码
- **一键卸载**: 完全移除脚本和配置

### 3. 配置操作
- `add [protocol]` - 添加指定协议配置
- `del [name]` - 删除指定配置
- `list` - 查看所有配置
- `info [name]` - 查看配置详情
- `url [name]` - 获取分享链接
- `qr [name]` - 生成二维码
- `port [name] [port]` - 更换端口

### 4. 系统管理
- `start/stop/restart` - 服务控制
- `status` - 运行状态
- `log` - 查看日志
- `uninstall` - 完全卸载
- `update` - 更新脚本和核心

## 技术要求

### 系统支持
- Ubuntu 20.04+
- Debian 10+
- CentOS 7+

### 依赖组件
- sing-box 核心程序
- systemd 服务管理
- 基础网络工具 (curl, wget)

### 配置存储
- 配置文件: `/etc/sing-box/config.json`
- 脚本数据: `/usr/local/etc/sing-box/`
- 日志文件: `/var/log/sing-box/`

## 用户体验

### 安装方式
```bash
bash <(curl -fsSL https://raw.githubusercontent.com/用户名/singbox/main/install.sh)
```

### 使用示例
```bash
# 添加 VLESS Reality 配置
sing-box add vless

# 添加 VMess 配置
sing-box add vmess

# 添加 Hysteria2 配置
sing-box add hy2

# 查看配置信息
sing-box info vless-001

# 获取分享链接
sing-box url vless-001

# 更换端口
sing-box port vless-001 8443

# 卸载
sing-box uninstall
```

## 安全考虑

- 自动生成强随机密码和 UUID
- 支持自定义端口避免冲突
- 配置文件权限控制
- 删除操作需要确认

## 项目结构

```
sing-box/
├── install.sh          # 安装脚本
├── sing-box.sh         # 主脚本
├── configs/            # 配置模板
│   ├── vless.json
│   ├── vmess.json
│   └── hy2.json
├── utils/              # 工具函数
└── README.md           # 使用说明
```

## 开发优先级

1. **P0**: 基础安装和 VLESS Reality 配置
2. **P1**: VMess 和 Hysteria2 支持
3. **P2**: 配置管理和链接分享
4. **P3**: 端口管理和系统优化
5. **P4**: 卸载和更新功能

---

*参考项目: https://github.com/233boy/sing-box* <mcreference link="https://github.com/233boy/sing-box" index="1">1</mcreference>