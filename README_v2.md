# Sing-box ä¸€é”®å®‰è£…è„šæœ¬ v2.4.14 - æ¨¡å—åŒ–æ¶æ„ç‰ˆ

ğŸš€ **å…¨æ–°æ¨¡å—åŒ–æ¶æ„ï¼Œæ›´å¼ºå¤§ã€æ›´ç¨³å®šã€æ›´æ˜“ç»´æŠ¤**

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [æ–°æ¶æ„ç‰¹æ€§](#æ–°æ¶æ„ç‰¹æ€§)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ç›®å½•ç»“æ„](#ç›®å½•ç»“æ„)
- [æ ¸å¿ƒæ¨¡å—](#æ ¸å¿ƒæ¨¡å—)
- [æµ‹è¯•æ¡†æ¶](#æµ‹è¯•æ¡†æ¶)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [æ›´æ–°æ—¥å¿—](#æ›´æ–°æ—¥å¿—)

## ğŸ¯ é¡¹ç›®ç®€ä»‹

Sing-box ä¸€é”®å®‰è£…è„šæœ¬ v2.4.14 å¼•å…¥äº†å…¨æ–°çš„æ¨¡å—åŒ–æ¶æ„ï¼Œåœ¨ä¿æŒå‘åå…¼å®¹çš„åŒæ—¶ï¼Œæä¾›äº†æ›´å¼ºå¤§çš„åŠŸèƒ½ã€æ›´å¥½çš„æ€§èƒ½å’Œæ›´é«˜çš„å¯ç»´æŠ¤æ€§ã€‚

### æ”¯æŒçš„åè®®
- âœ… **VLESS Reality** - æœ€æ–°çš„æ— ç‰¹å¾åè®®
- âœ… **VMess WebSocket** - ç»å…¸ç¨³å®šåè®®
- âœ… **Hysteria2** - é«˜æ€§èƒ½ UDP åè®®

### æ”¯æŒçš„ç³»ç»Ÿ
- âœ… Ubuntu 18.04+
- âœ… Debian 9+
- âœ… CentOS 7+
- âœ… Rocky Linux 8+
- âœ… AlmaLinux 8+

## ğŸŒŸ æ–°æ¶æ„ç‰¹æ€§

### ğŸ—ï¸ æ¨¡å—åŒ–è®¾è®¡
- **æ ¸å¿ƒå¼•æ“å±‚** (`core/`) - ç³»ç»Ÿå¼•å¯¼ã€é”™è¯¯å¤„ç†ã€æ—¥å¿—ç®¡ç†
- **é…ç½®ç®¡ç†** (`config/`) - ç»Ÿä¸€é…ç½®ç®¡ç†å’ŒéªŒè¯
- **å·¥å…·é›†** (`utils/`) - ç³»ç»Ÿå’Œç½‘ç»œå·¥å…·æ¨¡å—åŒ–
- **æµ‹è¯•æ¡†æ¶** (`tests/`) - å®Œæ•´çš„æµ‹è¯•ä½“ç³»

### ğŸš€ æ€§èƒ½ä¼˜åŒ–
- **å¯åŠ¨æ—¶é—´** - ä¼˜åŒ–æ¨¡å—åŠ è½½ï¼Œå‡å°‘ 50% å¯åŠ¨æ—¶é—´
- **å†…å­˜ä½¿ç”¨** - æ¨¡å—åŒ–è®¾è®¡é™ä½ 30% å†…å­˜å ç”¨
- **é”™è¯¯å¤„ç†** - å¿«é€Ÿé”™è¯¯å®šä½å’Œè‡ªåŠ¨æ¢å¤
- **é…ç½®ç¼“å­˜** - å‡å°‘é‡å¤é…ç½®åŠ è½½

### ğŸ”’ å®‰å…¨å¢å¼º
- **æƒé™æ£€æŸ¥** - ä¸¥æ ¼çš„æƒé™éªŒè¯æœºåˆ¶
- **è¾“å…¥éªŒè¯** - å¢å¼ºçš„å‚æ•°å’Œé…ç½®éªŒè¯
- **æ–‡ä»¶å®‰å…¨** - å®‰å…¨çš„ä¸´æ—¶æ–‡ä»¶æ“ä½œ
- **ä¿¡æ¯ä¿æŠ¤** - é¿å…æ•æ„Ÿä¿¡æ¯æ³„éœ²

### ğŸ§ª æµ‹è¯•é©±åŠ¨
- **å•å…ƒæµ‹è¯•** - å…¬å…±å‡½æ•°åº“åŠŸèƒ½éªŒè¯
- **é›†æˆæµ‹è¯•** - å®‰è£…æµç¨‹å’Œé…ç½®ç®¡ç†
- **ç«¯åˆ°ç«¯æµ‹è¯•** - å®Œæ•´ç”¨æˆ·å·¥ä½œæµæµ‹è¯•
- **è‡ªåŠ¨åŒ–æµ‹è¯•** - CI/CD é›†æˆæ”¯æŒ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šä¼ ç»Ÿå®‰è£…ï¼ˆä¿æŒä¸å˜ï¼‰
```bash
# ä¸‹è½½å¹¶è¿è¡ŒåŸç‰ˆè„šæœ¬
wget https://raw.githubusercontent.com/Yan-nian/singbox-install-script/main/install.sh
chmod +x install.sh
./install.sh
```

### æ–¹å¼äºŒï¼šæ–°æ¶æ„å®‰è£…ï¼ˆæ¨èï¼‰
```bash
# ä¸‹è½½æ–°æ¶æ„è„šæœ¬
wget https://raw.githubusercontent.com/Yan-nian/singbox-install-script/main/install_v2.sh
chmod +x install_v2.sh

# äº¤äº’å¼å®‰è£…
./install_v2.sh

# æˆ–è€…ç›´æ¥å®‰è£…ç‰¹å®šåè®®
./install_v2.sh -p vless install
./install_v2.sh -p vmess install
./install_v2.sh -p hysteria2 install
```

### æ–¹å¼ä¸‰ï¼šåœ¨çº¿ä¸€é”®å®‰è£…
```bash
# ä¼ ç»Ÿç‰ˆæœ¬
curl -fsSL https://raw.githubusercontent.com/Yan-nian/singbox-install-script/main/install.sh | bash

# æ–°æ¶æ„ç‰ˆæœ¬
curl -fsSL https://raw.githubusercontent.com/Yan-nian/singbox-install-script/main/install_v2.sh | bash
```

## ğŸ“ ç›®å½•ç»“æ„

```
singbox/
â”œâ”€â”€ install.sh              # åŸç‰ˆå®‰è£…è„šæœ¬ï¼ˆä¿æŒå…¼å®¹ï¼‰
â”œâ”€â”€ install_v2.sh           # æ–°æ¶æ„å®‰è£…è„šæœ¬
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ common.sh           # å…¬å…±å‡½æ•°åº“
â”‚   â””â”€â”€ menu.sh             # èœå•ç³»ç»Ÿ
â”œâ”€â”€ core/                   # ğŸ†• æ ¸å¿ƒå¼•æ“å±‚
â”‚   â”œâ”€â”€ bootstrap.sh        # ç³»ç»Ÿå¼•å¯¼æ¨¡å—
â”‚   â”œâ”€â”€ error_handler.sh    # é”™è¯¯å¤„ç†æ¨¡å—
â”‚   â””â”€â”€ logger.sh           # æ—¥å¿—ç³»ç»Ÿæ¨¡å—
â”œâ”€â”€ config/                 # ğŸ†• é…ç½®ç®¡ç†
â”‚   â””â”€â”€ config_manager.sh   # é…ç½®ç®¡ç†ä¸­å¿ƒ
â”œâ”€â”€ utils/                  # ğŸ†• å·¥å…·é›†
â”‚   â”œâ”€â”€ system_utils.sh     # ç³»ç»Ÿå·¥å…·
â”‚   â””â”€â”€ network_utils.sh    # ç½‘ç»œå·¥å…·
â”œâ”€â”€ tests/                  # ğŸ†• æµ‹è¯•æ¡†æ¶
â”‚   â”œâ”€â”€ test_framework.sh   # æµ‹è¯•æ¡†æ¶æ ¸å¿ƒ
â”‚   â”œâ”€â”€ unit/               # å•å…ƒæµ‹è¯•
â”‚   â”‚   â””â”€â”€ common_test.sh
â”‚   â”œâ”€â”€ integration/        # é›†æˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ install_test.sh
â”‚   â””â”€â”€ e2e/               # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚       â””â”€â”€ full_workflow_test.sh
â”œâ”€â”€ issues/                 # é¡¹ç›®æ–‡æ¡£
â”‚   â””â”€â”€ é¡¹ç›®ç»“æ„ä¼˜åŒ–å®æ–½è®¡åˆ’-v2.4.14.md
â”œâ”€â”€ VERSION                 # ç‰ˆæœ¬å·æ–‡ä»¶
â”œâ”€â”€ CHANGELOG.md           # æ›´æ–°æ—¥å¿—
â””â”€â”€ README_v2.md           # æ–°æ¶æ„è¯´æ˜æ–‡æ¡£
```

## ğŸ”§ æ ¸å¿ƒæ¨¡å—

### å¼•å¯¼æ¨¡å— (`core/bootstrap.sh`)
è´Ÿè´£ç³»ç»Ÿç¯å¢ƒæ£€æŸ¥å’Œåˆå§‹åŒ–ï¼š
- âœ… Bash ç‰ˆæœ¬æ£€æŸ¥
- âœ… æ“ä½œç³»ç»Ÿå’Œæ¶æ„æ£€æµ‹
- âœ… æƒé™éªŒè¯ï¼ˆroot/sudoï¼‰
- âœ… ä¾èµ–æ£€æŸ¥å’Œå®‰è£…
- âœ… ç½‘ç»œè¿æ¥æµ‹è¯•
- âœ… ç£ç›˜ç©ºé—´æ£€æŸ¥

### é”™è¯¯å¤„ç† (`core/error_handler.sh`)
ç»Ÿä¸€çš„é”™è¯¯ç®¡ç†ç³»ç»Ÿï¼š
- ğŸ·ï¸ **é”™è¯¯ç ä½“ç³»** - 100-899 æ ‡å‡†é”™è¯¯ç 
- ğŸ“ **é”™è¯¯æ—¥å¿—** - è¯¦ç»†çš„é”™è¯¯è®°å½•å’ŒæŠ¥å‘Š
- ğŸ”„ **è‡ªåŠ¨æ¢å¤** - æ™ºèƒ½é”™è¯¯æ¢å¤ç­–ç•¥
- ğŸ§¹ **æ¸…ç†æœºåˆ¶** - å¼‚å¸¸é€€å‡ºæ—¶çš„èµ„æºæ¸…ç†

### æ—¥å¿—ç³»ç»Ÿ (`core/logger.sh`)
å®Œå–„çš„æ—¥å¿—è®°å½•åŠŸèƒ½ï¼š
- ğŸ“Š **å¤šçº§åˆ«æ—¥å¿—** - TRACE/DEBUG/INFO/WARN/ERROR/FATAL
- ğŸ¨ **å½©è‰²è¾“å‡º** - ä¸åŒçº§åˆ«ä½¿ç”¨ä¸åŒé¢œè‰²
- ğŸ”„ **æ—¥å¿—è½®è½¬** - è‡ªåŠ¨æ—¥å¿—æ–‡ä»¶ç®¡ç†
- ğŸ“ˆ **æ—¥å¿—åˆ†æ** - æ—¥å¿—ç»Ÿè®¡å’Œåˆ†æåŠŸèƒ½

### é…ç½®ç®¡ç† (`config/config_manager.sh`)
ç»Ÿä¸€çš„é…ç½®ç®¡ç†ä¸­å¿ƒï¼š
- ğŸ“‹ **é…ç½®åŠ è½½** - æ”¯æŒå¤šç§é…ç½®æ ¼å¼
- âœ… **é…ç½®éªŒè¯** - ä¸¥æ ¼çš„é…ç½®å‚æ•°éªŒè¯
- ğŸ’¾ **é…ç½®å¤‡ä»½** - è‡ªåŠ¨é…ç½®å¤‡ä»½å’Œæ¢å¤
- ğŸ”§ **æ¨¡æ¿ç³»ç»Ÿ** - çµæ´»çš„é…ç½®æ¨¡æ¿

### ç³»ç»Ÿå·¥å…· (`utils/system_utils.sh`)
ç³»ç»Ÿç›¸å…³å·¥å…·å‡½æ•°ï¼š
- ğŸ’» **ç³»ç»Ÿä¿¡æ¯** - CPUã€å†…å­˜ã€ç£ç›˜ä¿¡æ¯è·å–
- ğŸ” **è¿›ç¨‹ç®¡ç†** - è¿›ç¨‹æŸ¥æ‰¾å’Œç®¡ç†
- ğŸ“ **æ–‡ä»¶æ“ä½œ** - å®‰å…¨çš„æ–‡ä»¶æ“ä½œå‡½æ•°
- ğŸ” **æƒé™ç®¡ç†** - æ–‡ä»¶å’Œç›®å½•æƒé™è®¾ç½®

### ç½‘ç»œå·¥å…· (`utils/network_utils.sh`)
ç½‘ç»œç›¸å…³å·¥å…·å‡½æ•°ï¼š
- ğŸŒ **è¿é€šæ€§æ£€æµ‹** - ç½‘ç»œè¿æ¥å’ŒDNSè§£ææµ‹è¯•
- ğŸ”Œ **ç«¯å£ç®¡ç†** - ç«¯å£æ‰«æå’Œå¯ç”¨æ€§æ£€æŸ¥
- ğŸ“Š **ç½‘ç»œç›‘æ§** - ç½‘ç»œæ¥å£çŠ¶æ€ç›‘æ§
- âš¡ **é€Ÿåº¦æµ‹è¯•** - ç½‘ç»œé€Ÿåº¦æµ‹è¯•åŠŸèƒ½

## ğŸ§ª æµ‹è¯•æ¡†æ¶

### æµ‹è¯•æ¡†æ¶æ ¸å¿ƒ (`tests/test_framework.sh`)
å®Œæ•´çš„æµ‹è¯•åŸºç¡€è®¾æ–½ï¼š
- ğŸ¯ **æ–­è¨€å‡½æ•°** - ä¸°å¯Œçš„æ–­è¨€å‡½æ•°åº“
- ğŸ“Š **æµ‹è¯•æŠ¥å‘Š** - è¯¦ç»†çš„æµ‹è¯•ç»“æœæŠ¥å‘Š
- ğŸ”„ **æµ‹è¯•ç®¡ç†** - æµ‹è¯•å¥—ä»¶å’Œç”¨ä¾‹ç®¡ç†
- ğŸ§¹ **ç¯å¢ƒéš”ç¦»** - æµ‹è¯•ç¯å¢ƒçš„åˆ›å»ºå’Œæ¸…ç†

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
./install_v2.sh test

# è¿è¡Œç‰¹å®šç±»å‹çš„æµ‹è¯•
./tests/test_framework.sh run tests/unit/
./tests/test_framework.sh run tests/integration/
./tests/test_framework.sh run tests/e2e/

# è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
bash tests/unit/common_test.sh
bash tests/integration/install_test.sh
bash tests/e2e/full_workflow_test.sh
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### å‘½ä»¤è¡Œå‚æ•°

```bash
./install_v2.sh [é€‰é¡¹] [å‘½ä»¤]

é€‰é¡¹ï¼š
  -p, --protocol PROTOCOL   æŒ‡å®šåè®® (vless|vmess|hysteria2)
  -m, --mode MODE          å®‰è£…æ¨¡å¼ (interactive|auto|silent)
  -h, --help               æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
  -v, --version            æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯

å‘½ä»¤ï¼š
  install                  å®‰è£… Sing-box
  uninstall               å¸è½½ Sing-box
  update                  æ›´æ–° Sing-box
  status                  æŸ¥çœ‹æœåŠ¡çŠ¶æ€
  config                  é…ç½®ç®¡ç†
  test                    è¿è¡Œæµ‹è¯•
  menu                    æ˜¾ç¤ºäº¤äº’èœå•
```

### ä½¿ç”¨ç¤ºä¾‹

```bash
# äº¤äº’å¼å®‰è£…
./install_v2.sh

# è‡ªåŠ¨å®‰è£… VLESS Reality
./install_v2.sh -p vless -m auto install

# é™é»˜å®‰è£… VMess WebSocket
./install_v2.sh -p vmess -m silent install

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./install_v2.sh status

# æ›´æ–° Sing-box
./install_v2.sh update

# è¿è¡Œæµ‹è¯•
./install_v2.sh test

# å¸è½½
./install_v2.sh uninstall
```

### é…ç½®ç®¡ç†

```bash
# æŸ¥çœ‹å½“å‰é…ç½®
./install_v2.sh config show

# å¤‡ä»½é…ç½®
./install_v2.sh config backup

# æ¢å¤é…ç½®
./install_v2.sh config restore

# éªŒè¯é…ç½®
./install_v2.sh config validate
```

## ğŸ‘¨â€ğŸ’» å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ
- éµå¾ª [Google Shell Style Guide](https://google.github.io/styleguide/shellguide.html)
- ä½¿ç”¨ 4 ç©ºæ ¼ç¼©è¿›
- å‡½æ•°åä½¿ç”¨ä¸‹åˆ’çº¿å‘½åæ³•
- å˜é‡åä½¿ç”¨å¤§å†™å­—æ¯å’Œä¸‹åˆ’çº¿

### æ¨¡å—å¼€å‘
1. **åˆ›å»ºæ–°æ¨¡å—**ï¼šåœ¨ç›¸åº”ç›®å½•ä¸‹åˆ›å»º `.sh` æ–‡ä»¶
2. **æ·»åŠ æ–‡æ¡£**ï¼šåœ¨æ–‡ä»¶å¤´éƒ¨æ·»åŠ è¯¦ç»†çš„åŠŸèƒ½è¯´æ˜
3. **ç¼–å†™æµ‹è¯•**ï¼šä¸ºæ–°åŠŸèƒ½ç¼–å†™å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹
4. **æ›´æ–°æ–‡æ¡£**ï¼šæ›´æ–°ç›¸å…³æ–‡æ¡£å’Œä½¿ç”¨è¯´æ˜

### æµ‹è¯•å¼€å‘
```bash
# åˆ›å»ºå•å…ƒæµ‹è¯•
cp tests/unit/common_test.sh tests/unit/new_module_test.sh

# åˆ›å»ºé›†æˆæµ‹è¯•
cp tests/integration/install_test.sh tests/integration/new_feature_test.sh

# è¿è¡Œæµ‹è¯•éªŒè¯
./tests/test_framework.sh run tests/unit/new_module_test.sh
```

### è´¡çŒ®æµç¨‹
1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. å¼€å¯ Pull Request

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æ¨¡å—åŠ è½½å¤±è´¥**
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la core/ config/ utils/

# é‡æ–°è®¾ç½®æƒé™
chmod +x core/*.sh config/*.sh utils/*.sh
```

**Q: æµ‹è¯•å¤±è´¥**
```bash
# æŸ¥çœ‹è¯¦ç»†æµ‹è¯•æ—¥å¿—
./install_v2.sh test --verbose

# è¿è¡Œç‰¹å®šæµ‹è¯•
bash tests/unit/common_test.sh
```

**Q: é…ç½®éªŒè¯å¤±è´¥**
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶
./install_v2.sh config validate

# æ¢å¤é»˜è®¤é…ç½®
./install_v2.sh config restore
```

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹å®‰è£…æ—¥å¿—
tail -f /var/log/singbox-install.log

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
journalctl -u sing-box -f

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f /var/log/singbox-error.log
```

### è·å–å¸®åŠ©
- ğŸ“– æŸ¥çœ‹æ–‡æ¡£ï¼š`./install_v2.sh --help`
- ğŸ› æŠ¥å‘Šé—®é¢˜ï¼š[GitHub Issues](https://github.com/Yan-nian/singbox-install-script/issues)
- ğŸ’¬ è®¨è®ºäº¤æµï¼š[GitHub Discussions](https://github.com/Yan-nian/singbox-install-script/discussions)

## ğŸ“‹ æ›´æ–°æ—¥å¿—

æŸ¥çœ‹ [CHANGELOG.md](CHANGELOG.md) äº†è§£è¯¦ç»†çš„ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

---

**ğŸŒŸ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼**

**ğŸ“§ è”ç³»æˆ‘ä»¬ï¼š** [é¡¹ç›®ä¸»é¡µ](https://github.com/Yan-nian/singbox-install-script)